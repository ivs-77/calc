# ПО для сборки проекта
В минимальной установке CentOS 7 для сборки проекта необходимо дополнительно установить следующее ПО:<br/>
1. Клиент github:<br/>
`yum install git`
1. CMake для сборки:<br/>
`yum install cmake`
1. Компиляторы C и C++:<br/>
`yum install gcc`<br/>
`yum install gcc-c++`
1. Библиотеки PostgreSQL:<br/> 
`yum install postgresql-devel`
1. Опционально netcat в качестве простого клиента для работы с сервисом calc:<br/> 
`yum install nc`
# Сборка проекта
1. Выбрать папку, в которую будет загружен проект
1. В выбранной папке выполнить команду:<br/> 
`git clone https://github.com/ivs-77/calc`
1. После успешного выполнения команды будет создана папка calc с подпапками:<br/>
src - исходный код проекта<br/>
sql - скрипты для работы с базой данных проекта<br/>
test - исходный код программы нагрузочного тестирования
1. Для сборки проекта в папке calc/src запустить скрипт build.sh
1. В процессе сборки в папке calc будут созданы подпапки:<br/>
build - вспомогательные файлы, необходимые в процессе сборки<br/>
bin - результат сборки проекта, содержит два файла:<br/> 
`  calc` - исполняемый файл<br/>
`  config.txt` - файл сонфигурации, см. раздел 'Конфигурация проекта'
# Конфигурация проекта
Файл config.txt содержит следующие настройки (с примерами значений):
1. `port=1500` - порт, который будет слушать приложение. Для разрешения порта брандмауэром выполнить:<br/>
`firewall-cmd --zone=public --add-port=1500/tcp --permanent`<br/>
`firewall-cmd --reload`
1. `login_timeout=30` - тайм-аут в секундах, в течении которого приложение ожидает команды login/password. Если пользователь не аутентифицируется за указанное время, сессия будет завершена.
1. `connect=host=127.0.0.1 dbname=calc user=calc password=calc` - строка подключения к БД в формате функции PGconnectdb. См. раздел 'Настройка БД'.
1. `stop_key=stop` - команда остановки приложения. Если в новой сессии без аутентификации ввести эту команду, приложение завершает работу.
1. `result_format=%14.3f` - формат, в котором приложение выдает результат вычислений. Данный параметр должен определять формат числа с плавающей точкой для фунции sprintf.
# Настройка БД
1. Установить PostgreSQL<br/>
`yum install postgresql-server postgresql-contrib`
1. Выполнить первоначальную настройку кластера PostgreSQL
`postgresql-setup initdb`
1. Настройка брандмауэра:<br/>
`firewall-cmd --add-service=postgresql --permanent`<br/>
`firewall-cmd --reload`<br/>
